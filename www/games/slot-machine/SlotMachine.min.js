var Game=function(x,y,r,z){var m=function(f){if(!(this instanceof m))throw"constructor called without new";for(var s=0,n=f.find(".slot-machine__reel"),d=f.find(".slot-machine__spin-btn"),t=n.length,u=f.attr("data-beverages").split(" "),p=function(c,d){function b(b,c,f){h=b;b={top:-k.eq(k.length-b-g.length).position().top};c?a.animate(b,c,f,l):a.attr("style","top:"+b.top+"px")}function f(){var c,a,d;1===e?(d=300,a="swing",c=1+(Math.floor(91*Math.random())+10)%g.length):(d=100,a="linear",c=g.length);
b(h+c,d,a)}if(!(this instanceof p))throw"constructor called without new";var h=0;s++;var a=c.find(".items"),g=a.children();g.clone().appendTo(a);g.clone().appendTo(a);var k=c.find(".items").children(),e=0,l=function(){h>=g.length&&(h%=g.length,b(h));e--;e?f():(k.eq(k.length-(h-1)-g.length).addClass("active"),c.trigger("rollEnd",{reelOrder:d,value:(1+k.length-h-g.length)%g.length}))};b(0);return{roll:function(){k.removeClass("active");e=Math.floor(11*Math.random())+10;f("linear")}}},c=[],l=0,v=function(a,
e){c[e.reelOrder]=e.value;l--;if(0==l){var b;a:{for(b=1;b<c.length;b++)if(c[b]!==c[b-1]){b=!1;break a}b=!0}b&&(b=u[c[0]],f.addClass("-winner"),alert("You Won! Your beverage is "+b));r.console&&console.log(c.toString());f.trigger("spinEnd",{state:c});d.show();d.focus()}},e=[],a=0;a<t;a++){var q=n.eq(a),w=new p(q,a);q.on("rollEnd",v);e.push(w);c[a]=0}d.hide();d.on("click",function(){f.removeClass("-winner");d.hide();l=e.length;for(var a=0;a<e.length;a++)c[a]=e[a].roll()}.bind(this));d.show();d.focus()};
return{SlotMachine:m}}(jQuery,document,window);window.onload=function(){new Game.SlotMachine($("#my-slot-machine"))};
