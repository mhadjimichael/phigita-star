struct struct {
    string nsp
    string name
    string pk
    bool is_final_if_no_scope
    set<slot> slots = {}
}

struct slot {
    string name
    string type
    string default
    bool optional_p = false
    string container_type
    string subtype
}

struct email -pk address {
    string name = ""
    string address
}

struct file {
    string name
    string mime_type
    i32 size
}

struct folder {
    string name
}

struct message -is_final_if_no_scope "1" {

    string device = "sms"

    i16 num_comments = 0

    string subject

    string body

    # example of an instance:
    # email -name "zena wow" -address "zena@example.com"
    #
    # example of slot definition:
    # email from
    #
    # slot from -type email
    attribute_helper email from

    slot from -type email

    # embedded object mapping for slot email
    # struct -name from {
    #     string name = ""
    #     string email
    # }

    list<email> to
    list<email> cc = {}
    list<email> bcc = {}

    bool public_p = false

    set<category> categories
    set<folder> folders
    set<string> tags
    set<file> attachment = {}

    map<string,i32> wordcount

    #extends -ref content.Object
    #extends -ref content.Content
    #extends -ref auditing.Auditing -hi world

    #index -attr public_p -abc 123

}

message msg1 -subject "hello"

db_insert -scope {user} -what msg1
